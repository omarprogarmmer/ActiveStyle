<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>تمارين جاهزة للتعديل</title>
<style>
:root {
  --primary-color: #2d6a4f;
  --secondary-color: #4dabf7;
  --accent-color: #51cf66;
  --light-bg: #f0f9ff;
  --dark-text: #2b2d42;
  --light-text: #edf2f4;
  --shadow: 0 4px 8px rgba(0,0,0,0.1);
  --danger-color: #ff6b6b;
}

body {
  font-family: 'Segoe UI', Tahoma, sans-serif;
  background: var(--light-bg);
  padding: 20px;
  color: var(--dark-text);
  line-height: 1.6;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
}

h1 {
  text-align: center;
  color: var(--primary-color);
  margin-bottom: 30px;
  font-size: 2.2rem;
  position: relative;
  padding-bottom: 15px;
}

h1::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 100px;
  height: 4px;
  background: var(--secondary-color);
  border-radius: 2px;
}

.accordion {
  cursor: pointer;
  background: var(--primary-color);
  color: white;
  padding: 15px;
  margin-top: 15px;
  border-radius: 10px;
  font-weight: bold;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: all 0.3s ease;
  box-shadow: var(--shadow);
}

.accordion:hover {
  background: #1e4e3a;
  transform: translateY(-2px);
}

.accordion::after {
  content: '▼';
  font-size: 0.8rem;
  transition: transform 0.3s ease;
}

.accordion.active::after {
  transform: rotate(180deg);
}

.panel {
  display: none;
  padding: 20px;
  background: #fff;
  border-radius: 0 0 10px 10px;
  box-shadow: var(--shadow);
  margin-bottom: 20px;
  animation: fadeIn 0.5s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
  margin-bottom: 20px;
}

th, td {
  padding: 12px 15px;
  border: 1px solid #ddd;
  text-align: center;
}

th {
  background: var(--accent-color);
  color: white;
  font-weight: bold;
}

tr:nth-child(even) {
  background-color: #f9f9f9;
}

tr:hover {
  background-color: #f1f1f1;
}

input[type=number], input[type=text] {
  width: 80px;
  padding: 8px;
  border-radius: 5px;
  border: 1px solid #ccc;
  text-align: center;
  font-family: inherit;
}

button {
  padding: 8px 15px;
  border: none;
  border-radius: 5px;
  background: var(--secondary-color);
  color: white;
  cursor: pointer;
  transition: background 0.3s;
  font-family: inherit;
}

button:hover {
  background: #3b99e0;
}

.btn-delete {
  background: var(--danger-color);
  margin-right: 5px;
}

.btn-delete:hover {
  background: #ee5253;
}

.btn-delete-muscle {
  background: var(--danger-color);
  margin-top: 10px;
}

.btn-delete-muscle:hover {
  background: #ee5253;
}

form {
  margin-top: 20px;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  padding: 15px;
  background: #f8f9fa;
  border-radius: 8px;
}

form input {
  flex: 1;
  min-width: 120px;
}

.progress-container {
  margin: 15px 0;
  padding: 10px;
  background: #f8f9fa;
  border-radius: 8px;
}

.empty-message {
  text-align: center;
  padding: 20px;
  color: #6c757d;
  font-style: italic;
  background: #f8f9fa;
  border-radius: 8px;
  margin: 15px 0;
}

progress {
  border-radius: 5px;
  width: 100%;
  height: 25px;
  margin-top: 8px;
}

progress::-webkit-progress-bar {
  background-color: #e9ecef;
  border-radius: 5px;
}

progress::-webkit-progress-value {
  background-color: var(--accent-color);
  border-radius: 5px;
  transition: width 0.5s;
}

.controls {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin: 20px 0;
}

.controls button {
  padding: 10px 20px;
  font-weight: bold;
}

.add-muscle-form {
  margin-top: 30px;
  padding: 20px;
  background: white;
  border-radius: 10px;
  box-shadow: var(--shadow);
}

.add-muscle-form h2 {
  margin-top: 0;
  color: var(--primary-color);
  text-align: center;
}

@media (max-width: 768px) {
  form {
    flex-direction: column;
  }
  
  input[type=number], input[type=text] {
    width: 100%;
  }
  
  .accordion {
    padding: 12px;
  }
  
  .controls {
    flex-direction: column;
  }
}
</style>
</head>
<body>

<div class="container">
  <h1>🏋️ جدول التمارين</h1>
  
  <div class="controls">
    <button onclick="saveToLocalStorage()">💾 حفظ التمارين</button>
    <button onclick="loadFromLocalStorage()">🔄 تحميل التمارين</button>
    <button onclick="resetToDefault()">🔄 إعادة تعيين</button>
  </div>
  
  <div id="muscleSections"></div>

  <!-- نموذج إضافة عضلة جديدة -->
  <div class="add-muscle-form">
    <h2>إضافة مجموعة عضلات جديدة</h2>
    <form id="addMuscleForm">
      <input type="text" placeholder="اسم العضلة" required id="new-muscle-name">
      <button type="submit">➕ إضافة عضلة</button>
    </form>
  </div>

  <!-- شريط التقدم العام -->
  <div class="progress-container">
    <label for="overallProgress">التقدم العام:</label>
    <progress id="overallProgress" value="0" max="100"></progress>
    <span id="overallProgressText">0%</span>
  </div>
</div>

<script>
// بيانات التمارين الافتراضية
const defaultExercises = {
  "صدر": [
    {name:"ضغط بنش", reps:12, weight:50, originalReps:12},
    {name:"فلاي دمبل", reps:10, weight:12, originalReps:10}
  ],
  "زند أمامي": [
    {name:"بايسبس دمبل", reps:15, weight:10, originalReps:15},
    {name:"بايسبس بار", reps:12, weight:20, originalReps:12}
  ],
  "ظهر": [
    {name:"سحب خلفي", reps:12, weight:40, originalReps:12},
    {name:"تمرين ظهر دمبل", reps:10, weight:15, originalReps:10}
  ],
  "أرجل": [
    {name:"سكوات", reps:15, weight:60, originalReps:15},
    {name:"لانجز", reps:12, weight:20, originalReps:12}
  ],
  "أكتاف": [
    {name:"رفرفة جانبية", reps:12, weight:8, originalReps:12},
    {name:"ضغط أكتاف", reps:10, weight:25, originalReps:10}
  ]
};

let exercises = JSON.parse(JSON.stringify(defaultExercises));

// تحميل البيانات من التخزين المحلي إذا كانت موجودة
function loadFromLocalStorage() {
  const savedExercises = localStorage.getItem('fitnessExercises');
  if (savedExercises) {
    exercises = JSON.parse(savedExercises);
    renderSections();
    alert('تم تحميل التمارين المحفوظة!');
  } else {
    alert('لا توجد تمارين محفوظة مسبقاً!');
  }
}

// حفظ البيانات إلى التخزين المحلي
function saveToLocalStorage() {
  localStorage.setItem('fitnessExercises', JSON.stringify(exercises));
  alert('تم حفظ التمارين بنجاح!');
}

// إعادة تعيين إلى التمارين الافتراضية
function resetToDefault() {
  if (confirm('هل تريد حقاً إعادة تعيين جميع التمارين إلى الإعدادات الافتراضية؟ سيتم فقدان جميع التغييرات غير المحفوظة.')) {
    exercises = JSON.parse(JSON.stringify(defaultExercises));
    renderSections();
  }
}

// إنشاء شريط تقدم لكل عضلة
function createMuscleProgress(muscle, panel) {
  const container = document.createElement('div');
  container.className = 'progress-container';
  const label = document.createElement('label');
  label.textContent = `تقدم ${muscle}:`;
  label.style.display = 'block';
  const progress = document.createElement('progress');
  progress.id = `${muscle}-progress`;
  progress.value = 0;
  progress.max = 100;
  const span = document.createElement('span');
  span.id = `${muscle}-progress-text`;
  span.textContent = '0%';
  span.style.marginLeft = '5px';
  container.appendChild(label);
  container.appendChild(progress);
  container.appendChild(span);
  panel.insertBefore(container, panel.firstChild);
}

// تحديث شريط العضلة حسب نسبة الإنجاز
function updateMuscleProgress(muscle) {
  // إذا لم يكن هناك تمارين، يكون التقدم 0%
  if (!exercises[muscle] || exercises[muscle].length === 0) {
    document.getElementById(`${muscle}-progress`).value = 0;
    document.getElementById(`${muscle}-progress-text`).textContent = '0%';
    return;
  }
  
  const total = exercises[muscle].length;
  let percentSum = 0;
  exercises[muscle].forEach(ex => {
    let repsPercent = Math.min((ex.reps / ex.originalReps) * 100, 100);
    percentSum += repsPercent;
  });
  const avgPercent = Math.round(percentSum / total);
  document.getElementById(`${muscle}-progress`).value = avgPercent;
  document.getElementById(`${muscle}-progress-text`).textContent = avgPercent + '%';
}

// تحديث شريط التقدم العام
function updateOverallProgress() {
  let totalExercises = 0;
  let percentSum = 0;
  
  Object.keys(exercises).forEach(muscle => {
    // تجاهل العضلات التي ليس لها تمارين
    if (!exercises[muscle] || exercises[muscle].length === 0) {
      return;
    }
    
    exercises[muscle].forEach(ex => {
      let repsPercent = Math.min((ex.reps / ex.originalReps) * 100, 100);
      percentSum += repsPercent;
      totalExercises++;
    });
  });
  
  // إذا لم يكن هناك تمارين، يكون التقدم 0%
  const overallPercent = totalExercises > 0 ? Math.round(percentSum / totalExercises) : 0;
  document.getElementById('overallProgress').value = overallPercent;
  document.getElementById('overallProgressText').textContent = overallPercent + '%';
}

// حذف تمرين
function deleteExercise(muscle, index) {
  if (confirm('هل تريد حقاً حذف هذا التمرين؟')) {
    exercises[muscle].splice(index, 1);
    renderSections();
    updateOverallProgress();
  }
}

// حذف عضلة كاملة
function deleteMuscle(muscle) {
  if (confirm(`هل تريد حقاً حذف مجموعة ${muscle} بالكامل؟`)) {
    delete exercises[muscle];
    renderSections();
    updateOverallProgress();
  }
}

// رسم الأقسام مع شريط العضلة
function renderSections(){
  const container = document.getElementById('muscleSections');
  container.innerHTML = '';
  
  Object.keys(exercises).forEach(muscle => {
    const acc = document.createElement('div');
    acc.className = 'accordion';
    acc.textContent = muscle;
    container.appendChild(acc);

    const panel = document.createElement('div');
    panel.className = 'panel';
    createMuscleProgress(muscle, panel);

    // إذا كانت العضلة تحتوي على تمارين
    if (exercises[muscle] && exercises[muscle].length > 0) {
      const table = document.createElement('table');
      table.innerHTML = '<thead><tr><th>الحركة</th><th>العدات</th><th>الوزن (كغ)</th><th>الإجراءات</th></tr></thead>';
      const tbody = document.createElement('tbody');
      
      exercises[muscle].forEach((ex,index) => {
        const row = document.createElement('tr');
        row.innerHTML = `<td>${ex.name}</td>
          <td><input type="number" value="${ex.reps}" min="1" id="${muscle}-reps-${index}"></td>
          <td><input type="number" value="${ex.weight}" min="0" id="${muscle}-weight-${index}"></td>
          <td>
            <button class="btn-delete" onclick="deleteExercise('${muscle}',${index})">🗑️ حذف</button>
            <button onclick="updateExercise('${muscle}',${index})">✔️ تحديث</button>
          </td>`;
        tbody.appendChild(row);
      });
      
      table.appendChild(tbody);
      panel.appendChild(table);
    } else {
      // عرض رسالة عندما لا توجد تمارين
      const emptyMsg = document.createElement('div');
      emptyMsg.className = 'empty-message';
      emptyMsg.textContent = 'لا توجد تمارين في هذه المجموعة. يمكنك إضافة تمارين جديدة باستخدام النموذج أدناه.';
      panel.appendChild(emptyMsg);
    }

    // نموذج إضافة تمرين جديد
    const form = document.createElement('form');
    form.innerHTML = `<input type="text" placeholder="اسم الحركة" required id="${muscle}-new-name">
      <input type="number" placeholder="العدات" min="1" required id="${muscle}-new-reps">
      <input type="number" placeholder="الوزن" min="0" required id="${muscle}-new-weight">
      <button type="submit">➕ إضافة حركة</button>`;
      
    form.addEventListener('submit', e=>{
      e.preventDefault();
      const name = document.getElementById(`${muscle}-new-name`).value;
      const reps = parseInt(document.getElementById(`${muscle}-new-reps`).value);
      const weight = parseInt(document.getElementById(`${muscle}-new-weight`).value);
      
      // التأكد من وجود مصفوفة التمارين للعضلة
      if (!exercises[muscle]) {
        exercises[muscle] = [];
      }
      
      exercises[muscle].push({name,reps,weight,originalReps:reps});
      renderSections();
      updateOverallProgress();
      
      // مسح حقول الإدخال بعد الإضافة
      document.getElementById(`${muscle}-new-name`).value = '';
      document.getElementById(`${muscle}-new-reps`).value = '';
      document.getElementById(`${muscle}-new-weight`).value = '';
    });
    
    panel.appendChild(form);
    
    // زر حذف العضلة بالكامل
    const deleteMuscleButton = document.createElement('button');
    deleteMuscleButton.className = 'btn-delete-muscle';
    deleteMuscleButton.textContent = '🗑️ حذف هذه المجموعة بالكامل';
    deleteMuscleButton.onclick = () => deleteMuscle(muscle);
    panel.appendChild(deleteMuscleButton);

    container.appendChild(panel);
    
    acc.addEventListener('click', ()=>{
      const isActive = panel.style.display === 'block';
      panel.style.display = isActive ? 'none' : 'block';
      acc.classList.toggle('active', !isActive);
    });
    
    updateMuscleProgress(muscle);
  });
  
  updateOverallProgress();
}

// تحديث تمرين
function updateExercise(muscle,index){
  const reps = parseInt(document.getElementById(`${muscle}-reps-${index}`).value);
  const weight = parseInt(document.getElementById(`${muscle}-weight-${index}`).value);
  exercises[muscle][index].reps = reps;
  exercises[muscle][index].weight = weight;
  updateMuscleProgress(muscle);
  updateOverallProgress();
  alert('تم التحديث!');
}

// إضافة عضلة جديدة
document.getElementById('addMuscleForm').addEventListener('submit', function(e) {
  e.preventDefault();
  const muscleName = document.getElementById('new-muscle-name').value.trim();
  
  if (muscleName) {
    if (!exercises[muscleName]) {
      exercises[muscleName] = [];
      renderSections();
      document.getElementById('new-muscle-name').value = '';
    } else {
      alert('هذه المجموعة موجودة بالفعل!');
    }
  }
});

// تشغيل العرض الأولي مع محاولة تحميل البيانات المحفوظة
window.onload = function() {
  const savedExercises = localStorage.getItem('fitnessExercises');
  if (savedExercises) {
    exercises = JSON.parse(savedExercises);
  }
  renderSections();
}
</script>

</body>
</html>