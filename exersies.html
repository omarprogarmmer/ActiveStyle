<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ØªÙ…Ø§Ø±ÙŠÙ† Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„</title>
<style>
body { font-family: Tahoma,sans-serif; background:#f0f9ff; padding:20px; }
h1 { text-align:center; color:#4dabf7; }
.accordion { cursor: pointer; background: #2d6a4f; color: white; padding: 10px; margin-top: 10px; border-radius:8px; font-weight:bold; }
.panel { display:none; padding: 10px; background: #fff; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1); margin-bottom: 10px; }
table { width:100%; border-collapse: collapse; margin-top:10px; }
th, td { padding:10px; border:1px solid #ccc; text-align:center; }
th { background:#51cf66; color:white; }
td { background:#fff; }
input[type=number], input[type=text] { width:80px; padding:5px; border-radius:5px; border:1px solid #ccc; text-align:center; }
button { padding:5px 10px; border:none; border-radius:5px; background:#4dabf7; color:white; cursor:pointer; }
form { margin-top:10px; display:flex; flex-wrap:wrap; justify-content:center; gap:5px; }
progress { border-radius:5px; width: 100%; height: 20px; margin-top:5px; }
.progress-container { margin:10px 0; }
</style>
</head>
<body>

<h1>ğŸ‹ï¸ Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†</h1>
<div id="muscleSections"></div>

<!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ø¹Ø§Ù… -->
<div class="progress-container">
  <label for="overallProgress">Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ø¹Ø§Ù…:</label>
  <progress id="overallProgress" value="0" max="100"></progress>
  <span id="overallProgressText">0%</span>
</div>

<script>
const exercises = {
  "ØµØ¯Ø±": [
    {name:"Ø¶ØºØ· Ø¨Ù†Ø´", reps:12, weight:50, originalReps:12},
    {name:"ÙÙ„Ø§ÙŠ Ø¯Ù…Ø¨Ù„", reps:10, weight:12, originalReps:10}
  ],
  "Ø²Ù†Ø¯ Ø£Ù…Ø§Ù…ÙŠ": [
    {name:"Ø¨Ø§ÙŠØ³Ø¨Ø³ Ø¯Ù…Ø¨Ù„", reps:15, weight:10, originalReps:15},
    {name:"Ø¨Ø§ÙŠØ³Ø¨Ø³ Ø¨Ø§Ø±", reps:12, weight:20, originalReps:12}
  ],
  "Ø¸Ù‡Ø±": [
    {name:"Ø³Ø­Ø¨ Ø®Ù„ÙÙŠ", reps:12, weight:40, originalReps:12},
    {name:"ØªÙ…Ø±ÙŠÙ† Ø¸Ù‡Ø± Ø¯Ù…Ø¨Ù„", reps:10, weight:15, originalReps:10}
  ],
  "Ø£Ø±Ø¬Ù„": [
    {name:"Ø³ÙƒÙˆØ§Øª", reps:15, weight:60, originalReps:15},
    {name:"Ù„Ø§Ù†Ø¬Ø²", reps:12, weight:20, originalReps:12}
  ],
  "Ø£ÙƒØªØ§Ù": [
    {name:"Ø±ÙØ±ÙØ© Ø¬Ø§Ù†Ø¨ÙŠØ©", reps:12, weight:8, originalReps:12},
    {name:"Ø¶ØºØ· Ø£ÙƒØªØ§Ù", reps:10, weight:25, originalReps:10}
  ]
};

// Ø¥Ù†Ø´Ø§Ø¡ Ø´Ø±ÙŠØ· ØªÙ‚Ø¯Ù… Ù„ÙƒÙ„ Ø¹Ø¶Ù„Ø©
function createMuscleProgress(muscle, panel) {
  const container = document.createElement('div');
  container.className = 'progress-container';
  const label = document.createElement('label');
  label.textContent = `ØªÙ‚Ø¯Ù… ${muscle}:`;
  label.style.display = 'block';
  const progress = document.createElement('progress');
  progress.id = `${muscle}-progress`;
  progress.value = 0;
  progress.max = 100;
  const span = document.createElement('span');
  span.id = `${muscle}-progress-text`;
  span.textContent = '0%';
  span.style.marginLeft = '5px';
  container.appendChild(label);
  container.appendChild(progress);
  container.appendChild(span);
  panel.insertBefore(container, panel.firstChild);
}

// ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ø¶Ù„Ø© Ø­Ø³Ø¨ Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²
function updateMuscleProgress(muscle) {
  const total = exercises[muscle].length;
  let percentSum = 0;
  exercises[muscle].forEach(ex => {
    let repsPercent = Math.min((ex.reps / ex.originalReps) * 100, 100);
    percentSum += repsPercent;
  });
  const avgPercent = Math.round(percentSum / total);
  document.getElementById(`${muscle}-progress`).value = avgPercent;
  document.getElementById(`${muscle}-progress-text`).textContent = avgPercent + '%';
}

// ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ø¹Ø§Ù…
function updateOverallProgress() {
  let totalExercises = 0;
  let percentSum = 0;
  Object.keys(exercises).forEach(muscle => {
    exercises[muscle].forEach(ex => {
      let repsPercent = Math.min((ex.reps / ex.originalReps) * 100, 100);
      percentSum += repsPercent;
      totalExercises++;
    });
  });
  const overallPercent = Math.round(percentSum / totalExercises);
  document.getElementById('overallProgress').value = overallPercent;
  document.getElementById('overallProgressText').textContent = overallPercent + '%';
}

// Ø±Ø³Ù… Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ù…Ø¹ Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ø¶Ù„Ø©
function renderSections(){
  const container = document.getElementById('muscleSections');
  container.innerHTML = '';
  Object.keys(exercises).forEach(muscle => {
    const acc = document.createElement('div');
    acc.className = 'accordion';
    acc.textContent = muscle;
    container.appendChild(acc);

    const panel = document.createElement('div');
    panel.className = 'panel';
    createMuscleProgress(muscle, panel);

    const table = document.createElement('table');
    table.innerHTML = '<thead><tr><th>Ø§Ù„Ø­Ø±ÙƒØ©</th><th>Ø§Ù„Ø¹Ø¯Ø§Øª</th><th>Ø§Ù„ÙˆØ²Ù† (ÙƒØº)</th><th>ØªØ­Ø¯ÙŠØ«</th></tr></thead>';
    const tbody = document.createElement('tbody');
    exercises[muscle].forEach((ex,index) => {
      const row = document.createElement('tr');
      row.innerHTML = `<td>${ex.name}</td>
        <td><input type="number" value="${ex.reps}" min="1" id="${muscle}-reps-${index}"></td>
        <td><input type="number" value="${ex.weight}" min="0" id="${muscle}-weight-${index}"></td>
        <td><button onclick="updateExercise('${muscle}',${index})">âœ”ï¸</button></td>`;
      tbody.appendChild(row);
    });
    table.appendChild(tbody);
    panel.appendChild(table);

    const form = document.createElement('form');
    form.innerHTML = `<input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ø­Ø±ÙƒØ©" required id="${muscle}-new-name">
      <input type="number" placeholder="Ø§Ù„Ø¹Ø¯Ø§Øª" min="1" required id="${muscle}-new-reps">
      <input type="number" placeholder="Ø§Ù„ÙˆØ²Ù†" min="0" required id="${muscle}-new-weight">
      <button type="submit">â• Ø¥Ø¶Ø§ÙØ© Ø­Ø±ÙƒØ©</button>`;
    form.addEventListener('submit', e=>{
      e.preventDefault();
      const name = document.getElementById(`${muscle}-new-name`).value;
      const reps = parseInt(document.getElementById(`${muscle}-new-reps`).value);
      const weight = parseInt(document.getElementById(`${muscle}-new-weight`).value);
      exercises[muscle].push({name,reps,weight,originalReps:reps});
      renderSections();
      updateOverallProgress();
    });
    panel.appendChild(form);

    container.appendChild(panel);
    acc.addEventListener('click', ()=>{ panel.style.display = panel.style.display==='block'?'none':'block'; });
    updateMuscleProgress(muscle);
  });
  updateOverallProgress();
}

// ØªØ­Ø¯ÙŠØ« ØªÙ…Ø±ÙŠÙ†
function updateExercise(muscle,index){
  const reps = parseInt(document.getElementById(`${muscle}-reps-${index}`).value);
  const weight = parseInt(document.getElementById(`${muscle}-weight-${index}`).value);
  exercises[muscle][index].reps = reps;
  exercises[muscle][index].weight = weight;
  updateMuscleProgress(muscle);
  updateOverallProgress();
  alert('ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«!');
}

// ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙˆÙ„ÙŠ
renderSections();
</script>

</body>
</html>
